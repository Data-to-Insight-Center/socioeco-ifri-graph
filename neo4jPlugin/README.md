neo4jPlugin
======

This neo4j plugin includes the analytic functions for IFRI graph database, that includes clustering given nodes based on their attribute values and perform graph matching algorithm on two sub-graphs based on node/edge attributes and graph connectivity.

User Guide
==========

Deploy the Plugin
---------------------------

To deploy this plugin, copy the jar file ('ifri.jar') and the entire directory of dependent libraries ('lib') to the neo4j plugin directory ('neo4j-community-2.1.3/plugins').
Remember to start/restart the server after you deploy the plugin.

Executing Test Cases
---------------------------

Assume that you have deployed the plugin into a Neo4j server at localhost:7474, you could run the following commands:

1. To see the plugin API, you can send a HTTP request GET using the Linux tool 'curl'

curl -v http://localhost:7474/db/data/ext/AnalyzeIFRI

You should be able to see four methods and their parameter specification in its results. 

2. To use the method 'cluster_nodes', you can try to type in the commands below (note that '\' is a line break for Linux CLI):

curl -X POST http://localhost:7474/db/data/ext/AnalyzeIFRI/graphdb/cluster_nodes \
-H "Content-Type: application/json" \
-d '{"target":"http://localhost:7474/db/data/", "nodeIds":[0, 3700, 5841, 10077, 13650, 18806, 23246, 27379, 31080, 35481, 38821, 45926, 51804, 56011, 58843, 63127, 67229, 71415, 74275, 80575, 83758, 86740, 89716, 93998, 97500, 100435, 103583, 107212, 110315, 112594, 115882, 118927, 122240, 126100, 129167, 132617, 135334, 139456, 142901, 147104, 151181, 155053, 164072, 170680, 176428, 184189, 188850, 192011, 195524, 199304, 203147, 205094, 210305, 213712, 217420, 219922, 222770, 225306, 229314, 233882, 237359, 240335, 243320, 247518, 250419, 253212, 255654, 258657, 261735, 262643, 263493, 266459, 272838, 276774, 280832, 288329, 290396, 292411, 294736, 295974, 297456, 299394, 301220, 303111, 304874, 306214, 308121, 310551, 310647, 312394, 315232, 316057, 316857, 317641, 317896, 317765, 319575, 322855, 325163, 327547, 340250, 346507, 360152, 368740, 378879, 383881, 392416, 401070, 407239, 412960, 421331, 431380, 446492, 457181, 462943, 468874, 472939, 479193, 484423, 495116, 504428, 516260, 530379, 541485, 546345, 557214, 566572, 573286, 576247, 585768, 593767, 599479, 604678, 624866, 634370, 639268, 642701, 648545, 655844, 660702, 666364, 674137, 681094, 688272, 692646, 697467, 703892, 711289, 716760, 721752, 725781, 734456, 741512, 745279, 749330, 756646, 761679, 764736, 765305, 766830, 769626, 773770, 781175, 785346, 790633, 797755, 801063, 823230, 832190, 844538, 852620, 860302, 866618, 883839, 884560, 896935, 902527, 907270, 910278, 915939, 917375, 923425, 927538, 933706, 945891, 951929, 965704, 972486, 975909, 977974, 981273, 986990, 993627, 999512, 1003659, 1008362, 1014657, 1021239, 1026205, 1030828, 1036745, 1039275, 1039600, 1044029, 1049555, 1050417, 1054773, 1057937, 1062360, 1067396, 1073950, 1081904, 1085156, 1092455, 1096717, 1102587, 1104228, 1107378, 1110050, 1113137, 1115823, 1120379, 1124031, 1126272, 1127473, 1131189, 1133834, 1137832, 1141790, 1144792, 1148412, 1150782, 1154711, 1158384, 1162237, 1166116, 1169775, 1172705, 1175996, 1179916, 1181352, 1184209, 1187343, 1190733, 1194685, 1198295, 1201280, 1203350, 1207350, 1209326, 1211977, 1213073, 1214051, 1216746, 1220779, 1223734, 1232406, 1240251, 1248307, 1253963, 1260623, 1266611, 1270908, 1277196, 1281726, 1287479, 1293117, 1298029, 1308066, 1312384, 1316790, 1321430, 1325203, 1328608, 1332490, 1336055, 1339959, 1344608, 1347128, 1352700, 1359777, 1366550, 1370853, 1376288, 1379631, 1383336, 1384281, 1387729, 1391369, 1395443, 1399383, 1403017, 1407088, 1409883, 1413318, 1415811, 1418336, 1421194, 1423837, 1426775, 1430502, 1433605, 1436906, 1440719, 1441416, 1444796, 1448921, 1452195, 1455254, 1457911, 1461175, 1464432, 1467366, 1469613, 1471151, 1472910, 1475690, 1477623, 1478989, 1481767, 1483653, 1488012, 1488975, 1490244, 1491577, 1493085, 1494278, 1499602, 1504259, 1511170, 1514927, 1518734, 1526897, 1532501, 1538836, 1543521, 1552504, 1558320, 1562982, 1565152, 1575074, 1582096, 1585500, 1587790, 1598002, 1602383], "numOfClusters":10, "saveResult":true}'

3. To use the method 'cluster_siteNodes', you could type in:

curl -X POST http://localhost:7474/db/data/ext/AnalyzeIFRI/graphdb/cluster_siteNodes -H "Content-Type: application/json" -d '{"target":"http://localhost:7474/db/data/", "numOfClusters":10, "saveResult":"true"}'

4. To use the method 'site_matching', you could type in (note that this method may take a while to finish depending on the size of the site sub-graphs):

curl -X POST http://localhost:7474/db/data/ext/AnalyzeIFRI/graphdb/site_matching -H "Content-Type: application/json" -d '{"target":"http://localhost:7474/db/data/", "siteNodeA":71415, "siteNodeB":67229, "saveResult":"true"}'

5. To use the method 'graph_matching', you could type in:

curl -X POST http://localhost:7474/db/data/ext/AnalyzeIFRI/graphdb/graph_matching \
-H "Content-Type: application/json" \
-d '{"target":"http://localhost:7474/db/data/", "nodeIdsA":[71415, 74207, 74271, 74161, 74202, 71443, 74141, 74121, 74113, 74055, 73939, 73828, 73717, 73673, 73578, 73546, 73451, 73407, 73345, 73313, 73254, 73216, 73145, 73083, 72991, 72932, 72846, 72775, 72677, 72609, 72574, 72524, 72477, 72424, 72374, 72315, 72280, 72245, 72198, 72136, 72050, 71976, 71911, 71907, 71903, 71899, 71895, 71891, 71887, 71883, 71879, 71875, 71871, 71867, 71863, 71859, 71855, 71851, 71847, 71843, 71839, 71835, 71831, 71827, 71823, 71819, 71815, 71811, 71807, 71803, 71799, 71795, 71791, 71787, 71783, 71779, 71775, 71771, 71767, 71763, 71759, 71755, 71751, 71747, 71743, 71739, 71735, 71731, 71727, 71723, 71719, 71715, 71711, 71707, 71703, 71699, 71695, 71691, 71687, 71683, 71679, 71675, 71671, 71667, 71663, 71659, 71655, 71651, 71647, 71643, 71639, 71635, 71631, 71627, 71623, 71619, 71615, 71611, 71607, 71603, 71599, 71595, 71591, 71587, 71583, 71579, 71575, 71571, 71567, 71563, 71559, 71555, 71551, 71547, 71543, 71539, 71535, 71531, 71527, 71523, 71519, 71515, 71511], "nodeIdsB":[67229, 71347, 71411, 71301, 71342, 71192, 71299, 71297, 71295, 71293, 71291, 71289, 71287, 71282, 71277, 71272, 71267, 71101, 71190, 71188, 71186, 71181, 71176, 67257, 71081, 71061, 71041, 71021, 71013, 70955, 70897, 70786, 70675, 70554, 70443, 70312, 70262, 70188, 70117, 70028, 69936, 69859, 69794, 69720, 69643, 69557, 69489, 69394, 69311, 69249, 69145, 69077, 68985, 68860, 68753, 68634, 68524, 68471, 68379, 68290, 68207, 68109, 68023, 67901, 67830, 67753, 67749, 67745, 67741, 67737, 67733, 67729, 67725, 67721, 67717, 67713, 67709, 67705, 67701, 67697, 67693, 67689, 67685, 67681, 67677, 67673, 67669, 67665, 67661, 67657, 67653, 67649, 67645, 67641, 67637, 67633, 67629, 67625, 67621, 67617, 67613, 67609, 67605, 67601, 67597, 67593, 67589, 67585, 67581, 67577, 67573, 67569, 67565, 67561, 67557, 67553, 67549, 67545, 67541, 67537, 67533, 67529, 67525, 67521, 67517, 67513, 67509, 67505, 67501, 67497, 67493, 67489, 67485, 67481, 67477, 67473, 67469, 67465, 67461, 67457, 67453, 67449, 67445, 67441, 67437, 67433, 67429, 67425, 67421, 67417, 67413, 67409, 67405, 67401, 67397, 67393, 67389, 67385, 67381, 67377, 67373, 67369, 67365, 67361, 67357, 67353, 67349, 67345, 67341, 67337, 67333, 67329, 67325], "saveResult":"false"}' 

